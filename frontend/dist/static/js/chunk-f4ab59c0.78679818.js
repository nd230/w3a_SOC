(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4ab59c0"],{"333d":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];i("a9e3");Math.easeInOutQuad=function(e,t,i,s){return e/=s/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function l(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,i){var s=o(),a=e-s,r=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=r;var o=Math.easeInOutQuad(c,s,a,t);l(o),c<t?n(e):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&r(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},u=c,d=(i("f1df"),i("2877")),p=Object(d["a"])(u,s,a,!1,null,"72c6b867",null);t["a"]=p.exports},3387:function(e,t,i){},"50ef":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"header"},[i("router-link",{staticStyle:{display:"block"},attrs:{to:"#"}},[i("img",{staticClass:"barlogo",attrs:{src:"http://www.aidolphins.com/logo.png"}}),e._v("W3A SOC ")]),i("div",{staticClass:"header-rigth"},[i("div",{staticClass:"header-rigth-text",on:{click:e.ControllerManage}},[e._v("控制台")]),i("div",{staticClass:"header-rigth-text",on:{click:e.LicenseManage}},[e._v("License")]),i("div",{staticClass:"header-rigth-text",on:{click:e.Readme}},[i("i",{staticClass:"el-icon-question"}),e._v("说明文档")]),i("div",{staticClass:"header-rigth-text",on:{click:e.logout}},[e._v("退出")])])],1),i("div",{staticClass:"content"},[i("div",{staticClass:"content-title"},[e._v("站点应用管理")]),i("div",{staticClass:"cards"},[i("el-card",{staticClass:"card_t",on:{click:function(t){return e.adduser()}}},[i("div",{on:{click:function(t){return e.adduser()}}},[i("p",{staticClass:"el-icon-plus h",on:{click:function(t){return e.adduser()}}},[i("br"),i("span",[e._v("点击创建站点")])])])]),e._l(e.Records,(function(t,s){return i("el-card",{key:s,class:[e.currentIndex===s?"select":"box-card"],nativeOn:{click:function(i){return e.siteRecords(t)}}},[i("div",{staticClass:"card-top"},[i("svg-icon",{staticClass:"website-svg",attrs:{"icon-class":"website"}}),i("div",{staticClass:"card-desc"},[i("div",{staticClass:"card-name"},[e._v(e._s(t.websiteName))]),i("div",{staticClass:"card-host"},[e._v(e._s(t.websiteDomain))])])],1),i("div",{staticClass:"card-time"},[e._v("创建时间:"+e._s(t.websiteCreateTime))]),i("div",{staticClass:"action"},[i("div",{staticClass:"detele"},[e._v("删除")]),i("div",{staticClass:"change"},[e._v("修改")])])])})),i("div",{staticClass:"clear"}),i("br"),i("div",{staticClass:"row"},[i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticStyle:{"margin-left":"-20px","margin-top":"-10px"},attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getSiteList}})],1),i("el-drawer",{attrs:{title:"创建站点",visible:e.siteCreatPop,direction:e.direction,wrapperClosable:!1,size:"35%"},on:{"update:visible":function(t){e.siteCreatPop=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("el-form",{ref:"form",attrs:{model:e.siteAll,"label-width":"20%"}},[i("el-form-item",{attrs:{label:"站点名称:"}},[i("el-col",{attrs:{span:10}},[i("el-input",{attrs:{size:"small"},model:{value:e.siteAll.websiteName,callback:function(t){e.$set(e.siteAll,"websiteName",t)},expression:"siteAll.websiteName"}})],1)],1),i("el-form-item",{attrs:{label:"站点域名:"}},[i("el-col",{attrs:{span:15}},[i("el-input",{attrs:{size:"small"},model:{value:e.siteAll.websiteDomain,callback:function(t){e.$set(e.siteAll,"websiteDomain",t)},expression:"siteAll.websiteDomain"}})],1)],1),i("el-form-item",{attrs:{label:"站点备注:"}},[i("el-col",{attrs:{span:15}},[i("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.siteAll.websiteRemark,callback:function(t){e.$set(e.siteAll,"websiteRemark",t)},expression:"siteAll.websiteRemark"}})],1)],1),i("el-form-item",{attrs:{label:"开启服务:",prop:"desc"}},[i("el-checkbox-group",{staticClass:"checkone",on:{change:e.CheckedOneChange_active},model:{value:e.activeCheckedOne,callback:function(t){e.activeCheckedOne=t},expression:"activeCheckedOne"}},e._l(e.activeList,(function(t){return i("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),i("el-form-item",{attrs:{label:"ES的地址:"}},[i("el-col",{attrs:{span:15}},[i("el-input",{attrs:{size:"small"},model:{value:e.siteAll.websiteEsIp,callback:function(t){e.$set(e.siteAll,"websiteEsIp",t)},expression:"siteAll.websiteEsIp"}})],1)],1),i("el-form-item",{attrs:{label:"ES的端口:"}},[i("el-col",{attrs:{span:15}},[i("el-input",{attrs:{size:"small"},model:{value:e.siteAll.websiteEsPort,callback:function(t){e.$set(e.siteAll,"websiteEsPort",t)},expression:"siteAll.websiteEsPort"}})],1)],1),i("el-form-item",{attrs:{label:"ES访问协议:"}},[i("el-col",{attrs:{span:15}},[i("el-select",{attrs:{size:"small"},model:{value:e.siteAll.websiteProto,callback:function(t){e.$set(e.siteAll,"websiteProto",t)},expression:"siteAll.websiteProto"}},[i("el-option",{attrs:{label:"HTTP",value:"0"}}),i("el-option",{attrs:{label:"HTTPS",value:"1"}})],1)],1)],1),e.activeCheckedOne.indexOf(3)>-1?i("el-form-item",{attrs:{label:"站点日志索引:"}},[i("el-col",{attrs:{span:15}},[i("el-input",{attrs:{size:"small"},model:{value:e.siteAll.websiteWebLogIndex,callback:function(t){e.$set(e.siteAll,"websiteWebLogIndex",t)},expression:"siteAll.websiteWebLogIndex"}})],1)],1):e._e(),e.activeCheckedOne.indexOf(1)>-1?i("el-form-item",{attrs:{label:"IDS日志索引:"}},[i("el-col",{attrs:{span:15}},[i("el-input",{attrs:{size:"small"},model:{value:e.siteAll.websiteFlowIndex,callback:function(t){e.$set(e.siteAll,"websiteFlowIndex",t)},expression:"siteAll.websiteFlowIndex"}})],1)],1):e._e()],1),i("div",{staticClass:"demo-drawer__footer"},[i("el-button",{on:{click:function(t){return e.returnBtn()}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.siteBtn()}}},[e._v("创建站点")])],1)],1)]),i("el-drawer",{attrs:{title:"License管理",visible:e.licenseStatus,direction:e.direction,size:e.newAlterSize},on:{"update:visible":function(t){e.licenseStatus=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("el-form",{ref:"form",staticStyle:{"margin-left":"-13px","margin-bottom":"-10px"},attrs:{model:e.LicenseModel,"label-width":"100px",inline:!0}},[i("el-descriptions",{staticClass:"margin-top",staticStyle:{"margin-left":"38px","margin-right":"30px","margin-bottom":"20px"},attrs:{column:1,border:""}},[i("el-descriptions-item",{attrs:{labelStyle:"width: 100px"}},[i("template",{attrs:{contentStyle:"width:400px"},slot:"label"},[e._v(" 当前版本 ")]),e._v(" "+e._s(e.LicenseModel.Version)+" ")],2),i("el-descriptions-item",[i("template",{slot:"label"},[e._v(" License信息 ")]),""!=e.LicenseModel.Info?i("span",[e._v(e._s(e.LicenseModel.Info))]):i("span",[e._v("未有License")])],2)],1)],1),i("div",{staticClass:"demo-drawer__footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.LicenseReturn}},[e._v(" 返回")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.LicenseReturn}},[e._v(" 更新License")])],1)],1)])],2)])])},a=[],n=i("ade3"),l=(i("d3b7"),i("159b"),i("a15b"),i("a18c"),i("333d")),o=i("b775"),r=i("4328"),c=i.n(r);function u(e){return o["a"].post("/license/info",c.a.stringify(e))}function d(e){return o["a"].post("/website/lists",c.a.stringify(e))}function p(e){return o["a"].post("/website/create",c.a.stringify(e))}var m=[{id:1,name:"流量监控"},{id:2,name:"漏洞扫描"},{id:3,name:"Web日志监控"}],b={name:"",components:{Pagination:l["a"]},props:{},data:function(){return{LicenseModel:{},activeName:"first",currentIndex:"0",siteCreatPop:!1,direction:"rtl",licenseStatus:!1,newAlterSize:"25%",siteAll:{websiteName:"",websiteDomain:"",websiteRemark:"",websiteServices:[],websiteWebLogIndex:"",websiteEsIp:"",websiteEsPort:"",websiteProto:"",websiteFlowIndex:""},activeList:m,isIndeterminate_active:!0,activeCheckedOne:[],activeCheckAll:!1,active_second:"",flag_active:"",listLoading:!1,Records:[],total:0,listQuery:{page:1,limit:10}}},watch:{},created:function(){this.getSiteList()},mounted:function(){},methods:Object(n["a"])({ControllerManage:function(){localStorage.setItem("websiteName","元豚控制台"),localStorage.setItem("roles","console"),this.$router.push({path:"/users"})},Readme:function(){window.open("http://w3asoc.aidolphins.com","_blank")},LicenseReturn:function(){this.licenseStatus=!1},LicenseManage:function(){var e=this;u().then((function(t){if(1===t.status){for(var i=0;i<t.data.length;i++)console.log(t.data[i]),1==parseInt(t.data[i].licenseType)&&(e.LicenseModel.Version=t.data[i].licenseInfo),2==parseInt(t.data[i].licenseType)&&(e.LicenseModel.Info=t.data[i].licenseInfo);e.licenseStatus=!0}}))},readmeTextBtn:function(){},logout:function(){localStorage.removeItem("token"),this.$router.push("/login")},handleClick:function(e,t){},siteRecords:function(e){localStorage.setItem("websiteName",e.websiteName),localStorage.setItem("websiteDomain",e.id),localStorage.setItem("roles","website"),this.$router.push({path:"/dashboard"})},CheckAllChange_active:function(e){this.flag_active=e;var t=[];this.activeList.forEach((function(e){t.push(e.id)})),this.activeCheckedOne=e?t:[],this.isIndeterminate_active=!1},CheckedOneChange_active:function(e){this.flag_active=!1,this.active_second=e;var t=e.length;this.activeCheckAll=t===this.activeList.length,this.active_second=this.active_second.join(),this.isIndeterminate_active=t>0&&t<this.activeList.length},adduser:function(){this.siteAll.websiteName="",this.siteAll.websiteDomain="",this.siteAll.websiteRemark="",this.siteAll.websiteWebLogIndex="",this.activeCheckAll=!1,this.isIndeterminate_active=!0,this.activeCheckedOne=[],this.siteAll.websiteEsIp="",this.siteAll.websiteEsPort="",this.siteAll.websiteProto="",this.siteAll.websiteFlowIndex="",this.siteCreatPop=!0},siteBtn:function(){var e,t=this,i=this.activeCheckedOne.join();e=this.flag_active||this.activeCheckAll?"0,1,2,3":i,p({websiteName:this.siteAll.websiteName,websiteDomain:this.siteAll.websiteDomain,websiteRemark:this.siteAll.websiteRemark,websiteServices:e,websiteWebLogIndex:this.siteAll.websiteWebLogIndex,websiteEsIp:this.siteAll.websiteEsIp,websiteEsPort:this.siteAll.websiteEsPort,websiteProto:this.siteAll.websiteProto,websiteFlowIndex:this.siteAll.websiteFlowIndex}).then((function(e){1===e.status?(t.$message.success(e.msg),t.siteCreatPop=!1,t.getSiteList()):(t.$message.error(e.msg),t.siteCreatPop=!1)}))},returnBtn:function(){this.siteCreatPop=!1},getSiteList:function(){var e=this;this.listLoading=!0,d({page:this.listQuery.page,pageSize:this.listQuery.limit}).then((function(t){e.listLoading=!1,1===t.status?(e.Records=t.data.list,e.listQuery.page=t.data.page,e.listQuery.limit=t.data.pageSize,e.total=t.data.total):e.$message.error(t.msg)}))}},"logout",(function(){localStorage.removeItem("token"),this.$router.push("/login")}))},f=b,h=(i("88a6"),i("2877")),g=Object(h["a"])(f,s,a,!1,null,"32cdd5de",null);t["default"]=g.exports},8312:function(e,t,i){},"88a6":function(e,t,i){"use strict";i("3387")},a15b:function(e,t,i){"use strict";var s=i("23e7"),a=i("44ad"),n=i("fc6a"),l=i("a640"),o=[].join,r=a!=Object,c=l("join",",");s({target:"Array",proto:!0,forced:r||!c},{join:function(e){return o.call(n(this),void 0===e?",":e)}})},a9e3:function(e,t,i){"use strict";var s=i("83ab"),a=i("da84"),n=i("94ca"),l=i("6eeb"),o=i("5135"),r=i("c6b6"),c=i("7156"),u=i("c04e"),d=i("d039"),p=i("7c73"),m=i("241c").f,b=i("06cf").f,f=i("9bf2").f,h=i("58a8").trim,g="Number",v=a[g],w=v.prototype,C=r(p(w))==g,_=function(e){var t,i,s,a,n,l,o,r,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(i=c.charCodeAt(2),88===i||120===i)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+c}for(n=c.slice(2),l=n.length,o=0;o<l;o++)if(r=n.charCodeAt(o),r<48||r>a)return NaN;return parseInt(n,s)}return+c};if(n(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,A=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof A&&(C?d((function(){w.valueOf.call(i)})):r(i)!=g)?c(new v(_(t)),i,A):_(t)},I=s?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;I.length>S;S++)o(v,k=I[S])&&!o(A,k)&&f(A,k,b(v,k));A.prototype=w,w.constructor=A,l(a,g,A)}},b775:function(e,t,i){"use strict";i("d3b7");var s=i("bc3a"),a=i.n(s),n=i("5c96"),l=a.a.create({baseURL:"/prod-api",timeout:5e3});l.interceptors.request.use((function(e){return e.headers["token"]=localStorage.getItem("token"),e.headers["website"]=localStorage.getItem("websiteDomain"),e.headers["roles"]=localStorage.getItem("roles"),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){var t=e.data;return t}),(function(e){return Object(n["Notification"])({message:e.message,title:"错误",type:"error"}),Promise.reject(e)})),t["a"]=l},f1df:function(e,t,i){"use strict";i("8312")}}]);